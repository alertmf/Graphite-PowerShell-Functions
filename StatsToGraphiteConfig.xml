<?xml version="1.0" encoding="utf-8"?>
<Configuration>
  <Graphite>
    <CarbonServer>127.0.0.1</CarbonServer>
    <CarbonServerPort>2003</CarbonServerPort>
    <MetricPath>null</MetricPath>
    <NodeHostName>$env:COMPUTERNAME</NodeHostName>
    <MetricSendIntervalSeconds>60</MetricSendIntervalSeconds>
    <SendUsingUDP>true</SendUsingUDP>
  </Graphite>
  <ModulesConfigs>
    <HostAliveFromUrl Enabled="true" CustomPrefix="SPS.virtualization.hosts.dev" Vmmenv="dev-vmm">
	</HostAliveFromUrl>
	<HostAliveFromUrl Enabled="true" CustomPrefix="SPS.virtualization.hosts.sys-msk" Vmmenv="vmm">
	</HostAliveFromUrl>
    <PerfCounters Enabled="false" CustomPrefix="KE.system.Sps">
      <Counter Name="\PhysicalDisk(*)\% Disk Read Time" />
      <Counter Name="\PhysicalDisk(*)\% Disk Time" />
      <Counter Name="\PhysicalDisk(*)\% Disk Write Time" />
      <Counter Name="\PhysicalDisk(*)\% Idle Time" />
      <Counter Name="\PhysicalDisk(*)\Avg. Disk Bytes/Read" />
      <Counter Name="\PhysicalDisk(*)\Avg. Disk Bytes/Transfer" />
      <Counter Name="\PhysicalDisk(*)\Avg. Disk Bytes/Write" />
      <Counter Name="\PhysicalDisk(*)\Current Disk Queue Length" />
      <Counter Name="\PhysicalDisk(*)\Disk Bytes/sec" />
      <Counter Name="\PhysicalDisk(*)\Disk Read Bytes/sec" />
      <Counter Name="\PhysicalDisk(*)\Disk Reads/sec" />
      <Counter Name="\PhysicalDisk(*)\Disk Transfers/sec" />
      <Counter Name="\PhysicalDisk(*)\Disk Write Bytes/sec" />
      <Counter Name="\PhysicalDisk(*)\Disk Writes/sec" />
      <Counter Name="\PhysicalDisk(*)\Split IO/Sec" />
      <Counter Name="\Memory\Available MBytes" />
      <Counter Name="\Memory\Pages/sec" />
      <Counter Name="\Memory\Pages Input/sec" />
      <Counter Name="\LogicalDisk(*)\Free Megabytes" />
      <Counter Name="\LogicalDisk(*)\% Free Space" />
      <Counter Name="\Network Interface(*)\Bytes Received/sec" />
      <Counter Name="\Network Interface(*)\Bytes Sent/sec" />
      <Counter Name="\Network Interface(*)\Packets Received/sec" />
      <Counter Name="\Network Interface(*)\Packets Sent/sec" />
      <Counter Name="\Processor Information(_Total)\% Processor Time" />
      <Counter Name="\Processor Information(_Total)\% Processor Utility" />
      <Counter Name="\Processor Information(_Total)\% Privileged Utility" />
      <Counter Name="\Processor Information(_Total)\% Privileged Time" />
      <Counter Name="\System\Processor Queue Length" />
      <Counter Name="\System\Threads" />
    </PerfCounters>
  </ModulesConfigs>
  <MetricCleaning>
    <!-- These will be found and replaced in the order they appear here -->
    <MetricReplace This="physicaldisk\(.* (.*)\:\)" With="physicaldisk.$1-drive" />
    <MetricReplace This="logicaldisk\(.* (.*)\:\)" With="logicaldisk.$1-drive" />
    <MetricReplace This="Network Interface\(([^\)]*)(?&lt;! _\d+)\)" With="Network Interface($1 _0)" />
    <MetricReplace This="Network Interface\((.*?) (?:_(\d+)|)\)" With="Network Interface($1-$2)" />
    <MetricReplace This="Network Interface\((intel)(?:\[r\]|)(.*?)\)" With="Network Interface($1.$2)" />
    <MetricReplace This="Network Interface\((microsoft)(.*?)\)" With="Network Interface($1.$2)" />
    <MetricReplace This="Packets Received(\/|)" With="RX.pkts-" />
    <MetricReplace This="Packets Sent(\/|)" With="TX.pkts-" />
    <MetricReplace This="Bytes Received(\/|)" With="RX.bytes-" />
    <MetricReplace This="Bytes Sent(\/|)" With="TX.bytes-" />
    <MetricReplace This="^\\\\" With="" />
    <MetricReplace This="\\\\" With="" />
    <MetricReplace This="\/" With="-" />
    <MetricReplace This=":" With="." />
    <MetricReplace This="\\" With="." />
    <MetricReplace This="\(" With="." />
    <MetricReplace This="\)" With="" />
    <MetricReplace This="\]" With="" />
    <MetricReplace This="\[" With="" />
    <MetricReplace This="\%" With="" />
    <MetricReplace This="\s+" With="" />
    <MetricReplace This="\.\." With="." />
    <MetricReplace This="_" With="" />
    <MetricReplace This="\#" With="num" />
    <MetricReplace This="\.processor\." With=".cpu." />
    <MetricReplace This="\.cpu\.total\.processortime" With=".cpu.usage" />
    <MetricReplace This="\.networkinterface\." With=".nic." />
    <MetricReplace This="\.physicaldisk\." With=".hdd." />
    <MetricReplace This="\.logicaldisk\." With=".volumes." />
    <MetricReplace This="\.memory\." With=".mem." />
  </MetricCleaning>
  <Filtering>
    <MetricFilter Name="isatap" />
    <MetricFilter Name="teredo tunneling" />
    <MetricFilter Name="logicaldisk\(_total\)" />
    <MetricFilter Name="logicaldisk\(harddiskvolume\d+\)" />
  </Filtering>
  <Logging>
    <VerboseOutput>true</VerboseOutput>
  </Logging>
</Configuration>
